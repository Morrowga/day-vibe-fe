"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{2479:function(e,t,r){r.d(t,{Z:function(){return _}});var n=r(5893),o=r(3591),s=r.n(o),a=r(7294),i=r(4224),l=r(613),d=r(1930),c=r(7199),x=r(3084),u=r(4342);let g=(0,u.ZP)(i.Z,{shouldForwardProp:e=>"isIncludeInCart"!==e})(e=>{let{theme:t,isIncludeInCart:r}=e;return{width:"100%",background:"#e5e5e5",borderRadius:t.spacing(2),overflow:"hidden",boxShadow:"none",transition:"transform 0.2s ease-in-out",position:"relative",cursor:"pointer",willChange:"transform","&:hover":{transform:"translateY(-2px)"},...r&&{border:"2px solid ".concat(t.palette.primary.main)}}}),m=(0,u.ZP)(c.Z)(e=>{let{theme:t}=e;return{position:"absolute",top:8,right:8,backgroundColor:t.palette.primary.main,color:"#fff",borderRadius:"50%",padding:4,display:"flex",justifyContent:"center",alignItems:"center",zIndex:2,border:"2px solid white",transition:"all 0.2s ease-in-out",transform:"scale(1)",opacity:1,animation:"cartIndicatorAppear 0.3s ease-in-out","@keyframes cartIndicatorAppear":{"0%":{transform:"scale(0)",opacity:0},"50%":{transform:"scale(1.2)"},"100%":{transform:"scale(1)",opacity:1}}}}),h=a.memo(e=>{let{src:t,alt:r,onLoad:o}=e,[i,d]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!1),g=(0,a.useCallback)(()=>{d(!0),null==o||o()},[o]),m=(0,a.useCallback)(()=>{u(!0)},[]);return x?(0,n.jsx)(c.Z,{sx:{width:"100%",height:200,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",color:"#999"},children:"ပုံမတွေ့ပါ"}):(0,n.jsxs)(n.Fragment,{children:[!i&&(0,n.jsxs)(c.Z,{sx:{width:"100%",height:200,backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",position:i?"absolute":"static",top:0,left:0,zIndex:i?-1:1},children:[(0,n.jsx)(c.Z,{sx:{width:40,height:40,borderRadius:"50%",background:"linear-gradient(45deg, #ddd 25%, transparent 25%), linear-gradient(-45deg, #ddd 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ddd 75%), linear-gradient(-45deg, transparent 75%, #ddd 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px",animation:"loading 1.2s linear infinite"}}),(0,n.jsx)(s(),{id:"67104e11aef72d53",children:"@-webkit-keyframes loading{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes loading{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes loading{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}),(0,n.jsx)(l.Z,{component:"img",image:t,alt:r,loading:"lazy",onLoad:g,onError:m,sx:{width:"100%",height:"auto",display:"block",objectFit:"cover",opacity:i?1:0,transition:"opacity 0.3s ease-in-out"}})]})});h.displayName="OptimizedImage";var f=a.memo(e=>{let{img:t,onAddToCart:r,isIncludeInCart:o}=e,[s,i]=(0,a.useState)(!1),l=(0,a.useCallback)(()=>{i(!0)},[]),u=(0,a.useCallback)(()=>{i(!1)},[]),f=(0,a.useCallback)(()=>{i(!1)},[]),p=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),r()},[r]),j=t&&t.length>0?t[0].url:"";return(0,n.jsxs)(g,{isIncludeInCart:o,sx:{transform:s?"scale(0.98)":"scale(1)",transition:"transform 0.1s ease-in-out"},children:[(0,n.jsx)(d.Z,{onClick:p,onMouseDown:l,onMouseUp:u,onMouseLeave:f,sx:{"&:focus":{outline:"2px solid",outlineColor:"primary.main",outlineOffset:2}},children:(0,n.jsx)(c.Z,{sx:{position:"relative"},children:(0,n.jsx)(h,{src:j,alt:"Product item"})})}),o&&(0,n.jsx)(m,{children:(0,n.jsx)(x.Z,{sx:{fontSize:20}})})]})},(e,t)=>e.isIncludeInCart===t.isIncludeInCart&&e.img===t.img&&e.onAddToCart===t.onAddToCart),p=r(564),j=r(1387),y=r(6517),C=r(9304),Z=r(2833),b=r(9320),k=r(9370),I=r(3771),v=r(2522),w=r(8969),z=r(6801),P=r(5007),S=r(7694),E=()=>(0,n.jsxs)(c.Z,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",zIndex:9999},children:[(0,n.jsx)(c.Z,{component:"img",src:"/images/G.png",alt:"Loading...",sx:{width:200,height:145}}),(0,n.jsx)(k.Z,{sx:{color:"#053020",marginTop:4}})]}),R=r(827),_=e=>{let{category:t}=e,[r,o]=(0,a.useState)(!1),[s,i]=(0,a.useState)(""),l=(0,P.I0)(),d=(0,P.v9)(e=>e.cart.items),{data:x,status:u,allProducts:g,currentPage:m,hasMore:h,loadingMore:_}=(0,P.v9)(e=>e.product),A=(0,a.useRef)(null),M=(0,a.useRef)(null),T=(0,a.useMemo)(()=>{if(!g||0===g.length)return[];let e=new Set;return g.filter(t=>!e.has(t.id)&&(e.add(t.id),!0))},[g]),N=(0,a.useMemo)(()=>{if(_)return!0;if(0===T.length||!h)return!1;let e=30*m;return!(T.length<e-15)},[h,_,T.length,m]),D=()=>o(e=>!e),F=e=>"".concat(e,"_").concat(Date.now()),L=e=>{if(d.some(t=>t.id===e.id)){let t=d.find(t=>t.id===e.id);t&&l((0,z.cl)(t.cart_id))}else{let t=F(e.id);l((0,z.jX)({...e,cart_id:t,quantity:1,size:null}))}},O=e=>{i(e.target.value)},q=()=>{l((0,S.GC)()),l((0,S.t2)({category:t,q:s,page:1}))},G=e=>{"Enter"===e.key&&q()},K=(0,a.useCallback)(()=>{N&&h&&!_&&l((0,S.t2)({category:t,q:s,page:m+1,isLoadingMore:!0}))},[l,t,s,m,h,_,N,T.length]);return((0,a.useEffect)(()=>{if(0===T.length||!N){A.current&&A.current.disconnect();return}let e=setTimeout(()=>{A.current&&A.current.disconnect(),M.current&&(A.current=new IntersectionObserver(e=>{e[0].isIntersecting&&N&&K()},{root:null,rootMargin:"100px",threshold:.1}),A.current.observe(M.current))},1e3);return()=>{clearTimeout(e),A.current&&A.current.disconnect()}},[K,N,T.length]),(0,a.useEffect)(()=>{l((0,S.GC)()),l((0,S.t2)({category:t,page:1}))},[l,t]),(0,a.useEffect)(()=>{},[m,h,_,g.length,T.length,N,u]),"loading"===u)?(0,n.jsx)(E,{}):"failed"===u?(0,n.jsx)("div",{children:"Error loading products"}):0===T.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:{lg:"5vh",sm:"10vh",xs:"5vh"},transition:"margin-top 1s",mx:{lg:10,xs:3,sm:10}},children:[(0,n.jsx)(j.Z,{placeholder:"ရှာရန်...",fullWidth:!0,value:s,onChange:O,onKeyPress:G,InputProps:{sx:{borderRadius:20},endAdornment:(0,n.jsx)(y.Z,{position:"end",children:(0,n.jsx)(C.Z,{onClick:q,edge:"end",sx:{mr:.5},children:(0,n.jsx)(v.Z,{})})})}}),(0,n.jsx)(c.Z,{sx:{mx:2},children:(0,n.jsx)(Z.Z,{badgeContent:d.length,color:"primary",children:(0,n.jsx)(C.Z,{color:"info",onClick:D,children:(0,n.jsx)(I.Z,{})})})})]})}),(0,n.jsx)(c.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",children:(0,n.jsx)(b.Z,{variant:"h6",color:"textSecondary",children:"မရှိသေးပါ။"})})]}):(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:{lg:"5vh",sm:"10vh",xs:"5vh"},transition:"margin-top 1s",mx:{lg:10,xs:3,sm:10},mb:3},children:[(0,n.jsx)(j.Z,{placeholder:"ရှာရန်...",fullWidth:!0,value:s,onChange:O,onKeyPress:G,InputProps:{sx:{borderRadius:20},endAdornment:(0,n.jsx)(y.Z,{position:"end",children:(0,n.jsx)(C.Z,{onClick:q,edge:"end",sx:{mr:.5},children:(0,n.jsx)(v.Z,{})})})}}),(0,n.jsx)(c.Z,{sx:{mx:2},children:(0,n.jsx)(Z.Z,{badgeContent:d.length,color:"primary",children:(0,n.jsx)(C.Z,{color:"info",onClick:D,children:(0,n.jsx)(I.Z,{})})})})]})}),(0,n.jsxs)(c.Z,{sx:{mx:{lg:2,xs:1,sm:3}},children:[(0,n.jsx)(R.Z,{breakpointCols:{default:7,1200:5,900:3,600:3,400:3},className:"masonry-grid",columnClassName:"masonry-grid-column",children:T.map(e=>{let t=d.some(t=>t.id===e.id);return(0,n.jsx)("div",{style:{marginBottom:"16px"},children:(0,n.jsx)(f,{img:e.image_urls,isIncludeInCart:t,onAddToCart:()=>L(e)})},e.id)})}),N&&(0,n.jsx)(c.Z,{ref:M,sx:{display:"flex",justifyContent:"center",my:3,py:2,width:"100%",height:"50px",clear:"both",marginTop:"20px",position:"relative",zIndex:1},children:_?(0,n.jsx)(k.Z,{size:40}):h?(0,n.jsx)(c.Z,{width:"100%",height:"40px",display:"flex",justifyContent:"center",children:(0,n.jsx)(b.Z,{variant:"body2",color:"text.secondary",children:"အောက်ကိုဆွဲကြည့်ပါ"})}):(0,n.jsx)(b.Z,{variant:"body2",color:"text.secondary",children:"..."})}),!N&&!h&&T.length>0&&(0,n.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",my:3,py:2},children:(0,n.jsx)(b.Z,{variant:"body2",color:"text.secondary",children:"အားလုံးပြီးပါပြီ"})})]}),(0,n.jsx)(w.Z,{isOpen:r,updateInfo:!1,onClose:D,cartItems:d,updateCartItem:(e,t)=>l((0,z.$R)({cart_id:e,quantity:t}))})]})}}}]);